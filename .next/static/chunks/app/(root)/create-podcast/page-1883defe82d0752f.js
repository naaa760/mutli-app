(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{7733:function(e,t,a){Promise.resolve().then(a.bind(a,2622))},2622:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});var s=a(7437),r=a(2555),n=a(9343),l=a(9772),i=a(495),o=a(2265),c=a(1538),d=a(7440),u=a(8364);let m=(0,a(2218).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(u.f,{ref:t,className:(0,d.cn)(m(),a),...r})});f.displayName=u.f.displayName;let p=n.RV,x=o.createContext({}),g=e=>{let{...t}=e;return(0,s.jsx)(x.Provider,{value:{name:t.name},children:(0,s.jsx)(n.Qr,{...t})})},h=()=>{let e=o.useContext(x),t=o.useContext(b),{getFieldState:a,formState:s}=(0,n.Gc)(),r=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...r}},b=o.createContext({}),v=o.forwardRef((e,t)=>{let{className:a,...r}=e,n=o.useId();return(0,s.jsx)(b.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",a),...r})})});v.displayName="FormItem";let j=o.forwardRef((e,t)=>{let{className:a,...r}=e,{error:n,formItemId:l}=h();return(0,s.jsx)(f,{ref:t,className:(0,d.cn)(n&&"text-destructive",a),htmlFor:l,...r})});j.displayName="FormLabel";let y=o.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:l,formMessageId:i}=h();return(0,s.jsx)(c.g7,{ref:t,id:n,"aria-describedby":r?"".concat(l," ").concat(i):"".concat(l),"aria-invalid":!!r,...a})});y.displayName="FormControl",o.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:n}=h();return(0,s.jsx)("p",{ref:t,id:n,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName="FormDescription";let N=o.forwardRef((e,t)=>{let{className:a,children:r,...n}=e,{error:l,formMessageId:i}=h(),o=l?String(null==l?void 0:l.message):r;return o?(0,s.jsx)("p",{ref:t,id:i,className:(0,d.cn)("text-sm font-medium text-destructive",a),...n,children:o}):null});N.displayName="FormMessage";var w=a(3102),S=a(5280),I=a(2421),T=a(4392),P=a(2468);let A=S.fC;S.ZA;let k=S.B4,_=o.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(S.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(S.JO,{asChild:!0,children:(0,s.jsx)(I.Z,{className:"h-4 w-4 opacity-50"})})]})});_.displayName=S.xz.displayName;let D=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(T.Z,{className:"h-4 w-4"})})});D.displayName=S.u_.displayName;let E=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})});E.displayName=S.$G.displayName;let R=o.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,s.jsx)(S.h_,{children:(0,s.jsxs)(S.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,s.jsx)(D,{}),(0,s.jsx)(S.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(E,{})]})})});R.displayName=S.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=S.__.displayName;let z=o.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(S.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(S.wU,{children:(0,s.jsx)(P.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(S.eT,{children:r})]})});z.displayName=S.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=S.Z0.displayName;let C=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});C.displayName="Textarea";var F=a(9627),O=a(4934),V=a(9253),Z=a(920),G=a(5657),U=a(3853);let M=e=>{let{setAudio:t,voiceType:a,voicePrompt:s,setAudioStorageId:r}=e,[n,l]=(0,o.useState)(!1),{toast:i}=(0,G.pm)(),c=(0,O.Db)(V.h.files.generateUploadUrl),{startUpload:d}=(0,U.nc)(c),u=(0,O.BH)(V.h.openai.generateAudioAction),m=(0,O.Db)(V.h.podcasts.getUrl);return{isGenerating:n,generatePodcast:async()=>{if(l(!0),t(""),!s)return i({title:"Please provide a voiceType to generate a podcast"}),l(!1);try{let e=await u({voice:a,input:s}),n=new Blob([e],{type:"audio/mpeg"}),o="podcast-".concat((0,Z.Z)(),".mp3"),c=new File([n],o,{type:"audio/mpeg"}),f=(await d([c]))[0].response.storageId;r(f);let p=await m({storageId:f});t(p),l(!1),i({title:"Podcast generated successfully"})}catch(e){console.log("Error generating podcast",e),i({title:"Error creating a podcast",variant:"destructive"}),l(!1)}}}};var B=e=>{let{isGenerating:t,generatePodcast:a}=M(e);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(f,{className:"text-16 font-bold text-white-1",children:"AI Prompt to generate Podcast"}),(0,s.jsx)(C,{className:"input-class font-light focus-visible:ring-offset-orange-1",placeholder:"Provide text to generate audio",rows:5,value:e.voicePrompt,onChange:t=>e.setVoicePrompt(t.target.value)})]}),(0,s.jsx)("div",{className:"mt-5 w-full max-w-[200px]",children:(0,s.jsx)(i.z,{type:"submit",className:"text-16 bg-orange-1 py-4 font-bold text-white-1",onClick:a,children:t?(0,s.jsxs)(s.Fragment,{children:["Generating",(0,s.jsx)(F.Z,{size:20,className:"animate-spin ml-2"})]}):"Generate"})}),e.audio&&(0,s.jsx)("audio",{controls:!0,src:e.audio,autoPlay:!0,className:"mt-5",onLoadedMetadata:t=>e.setAudioDuration(t.currentTarget.duration)})]})},J=a(6648),L=e=>{let{setImage:t,setImageStorageId:a,image:r,imagePrompt:n,setImagePrompt:l}=e,[c,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),x=(0,o.useRef)(null),{toast:g}=(0,G.pm)(),h=(0,O.Db)(V.h.files.generateUploadUrl),{startUpload:b}=(0,U.nc)(h),v=(0,O.Db)(V.h.podcasts.getUrl),j=(0,O.BH)(V.h.openai.generateThumbnailAction),y=async(e,s)=>{p(!0),t("");try{let r=new File([e],s,{type:"image/png"}),n=(await b([r]))[0].response.storageId;a(n);let l=await v({storageId:n});t(l),p(!1),g({title:"Thumbnail generated successfully"})}catch(e){console.log(e),g({title:"Error generating thumbnail",variant:"destructive"})}},N=async()=>{try{let e=await j({prompt:n}),t=new Blob([e],{type:"image/png"});y(t,"thumbnail-".concat((0,Z.Z)()))}catch(e){console.log(e),g({title:"Error generating thumbnail",variant:"destructive"})}},S=async e=>{e.preventDefault();try{let t=e.target.files;if(!t)return;let a=t[0],s=await a.arrayBuffer().then(e=>new Blob([e]));y(s,a.name)}catch(e){console.log(e),g({title:"Error uploading image",variant:"destructive"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"generate_thumbnail",children:[(0,s.jsx)(i.z,{type:"button",variant:"plain",onClick:()=>u(!0),className:(0,d.cn)("",{"bg-black-6":c}),children:"Use AI to generate thumbnail"}),(0,s.jsx)(i.z,{type:"button",variant:"plain",onClick:()=>u(!1),className:(0,d.cn)("",{"bg-black-6":!c}),children:"Upload custom image"})]}),c?(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"mt-5 flex flex-col gap-2.5",children:[(0,s.jsx)(f,{className:"text-16 font-bold text-white-1",children:"AI Prompt to generate Thumbnail"}),(0,s.jsx)(C,{className:"input-class font-light focus-visible:ring-offset-orange-1",placeholder:"Provide text to generate thumbnail",rows:5,value:n,onChange:e=>l(e.target.value)})]}),(0,s.jsx)("div",{className:"w-full max-w-[200px]",children:(0,s.jsx)(i.z,{type:"submit",className:"text-16 bg-orange-1 py-4 font-bold text-white-1",onClick:N,children:m?(0,s.jsxs)(s.Fragment,{children:["Generating",(0,s.jsx)(F.Z,{size:20,className:"animate-spin ml-2"})]}):"Generate"})})]}):(0,s.jsxs)("div",{className:"image_div",onClick:()=>{var e;return null==x?void 0:null===(e=x.current)||void 0===e?void 0:e.click()},children:[(0,s.jsx)(w.I,{type:"file",className:"hidden",ref:x,onChange:e=>S(e)}),m?(0,s.jsxs)("div",{className:"text-16 flex-center font-medium text-white-1",children:["Uploading",(0,s.jsx)(F.Z,{size:20,className:"animate-spin ml-2"})]}):(0,s.jsx)(J.default,{src:"/icons/upload-image.svg",width:40,height:40,alt:"upload"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)("h2",{className:"text-12 font-bold text-orange-1",children:"Click to upload"}),(0,s.jsx)("p",{className:"text-12 font-normal text-gray-1",children:"SVG, PNG, JPG, or GIF (max. 1080x1080px)"})]})]}),r&&(0,s.jsx)("div",{className:"flex-center w-full",children:(0,s.jsx)(J.default,{src:r,width:200,height:200,className:"mt-5",alt:"thumbnail"})})]})},H=a(6463);let W=["alloy","shimmer","nova","echo","fable","onyx"],Y=l.z.object({podcastTitle:l.z.string().min(2),podcastDescription:l.z.string().min(2)});var $=()=>{let e=(0,H.useRouter)(),[t,a]=(0,o.useState)(""),[l,c]=(0,o.useState)(null),[u,m]=(0,o.useState)(""),[x,h]=(0,o.useState)(""),[b,S]=(0,o.useState)(null),[I,T]=(0,o.useState)(0),[P,D]=(0,o.useState)(null),[E,Z]=(0,o.useState)(""),[U,M]=(0,o.useState)(!1),J=(0,O.Db)(V.h.podcasts.createPodcast),{toast:$}=(0,G.pm)(),q=(0,n.cI)({resolver:(0,r.F)(Y),defaultValues:{podcastTitle:"",podcastDescription:""}});async function Q(a){try{if(M(!0),!x||!u||!P)throw $({title:"Please generate audio and image"}),M(!1),Error("Please generate audio and image");await J({podcastTitle:a.podcastTitle,podcastDescription:a.podcastDescription,audioUrl:x,imageUrl:u,voiceType:P,imagePrompt:t,voicePrompt:E,views:0,audioDuration:I,audioStorageId:b,imageStorageId:l}),$({title:"Podcast created"}),M(!1),e.push("/")}catch(e){console.log(e),$({title:"Error",variant:"destructive"}),M(!1)}}return(0,s.jsxs)("section",{className:"mt-10 flex flex-col",children:[(0,s.jsx)("h1",{className:"text-20 font-bold text-white-1",children:"Create Podcast"}),(0,s.jsx)(p,{...q,children:(0,s.jsxs)("form",{onSubmit:q.handleSubmit(Q),className:"mt-12 flex w-full flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-[30px] border-b border-black-5 pb-10",children:[(0,s.jsx)(g,{control:q.control,name:"podcastTitle",render:e=>{let{field:t}=e;return(0,s.jsxs)(v,{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(j,{className:"text-16 font-bold text-white-1",children:"Title"}),(0,s.jsx)(y,{children:(0,s.jsx)(w.I,{className:"input-class focus-visible:ring-offset-orange-1",placeholder:"JSM Pro Podcast",...t})}),(0,s.jsx)(N,{className:"text-white-1"})]})}}),(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(f,{className:"text-16 font-bold text-white-1",children:"Select AI Voice"}),(0,s.jsxs)(A,{onValueChange:e=>D(e),children:[(0,s.jsx)(_,{className:(0,d.cn)("text-16 w-full border-none bg-black-1 text-gray-1 focus-visible:ring-offset-orange-1"),children:(0,s.jsx)(k,{placeholder:"Select AI Voice",className:"placeholder:text-gray-1 "})}),(0,s.jsx)(R,{className:"text-16 border-none bg-black-1 font-bold text-white-1 focus:ring-orange-1",children:W.map(e=>(0,s.jsx)(z,{value:e,className:"capitalize focus:bg-orange-1",children:e},e))}),P&&(0,s.jsx)("audio",{src:"/".concat(P,".mp3"),autoPlay:!0,className:"hidden"})]})]}),(0,s.jsx)(g,{control:q.control,name:"podcastDescription",render:e=>{let{field:t}=e;return(0,s.jsxs)(v,{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(j,{className:"text-16 font-bold text-white-1",children:"Description"}),(0,s.jsx)(y,{children:(0,s.jsx)(C,{className:"input-class focus-visible:ring-offset-orange-1",placeholder:"Write a short podcast description",...t})}),(0,s.jsx)(N,{className:"text-white-1"})]})}})]}),(0,s.jsxs)("div",{className:"flex flex-col pt-10",children:[(0,s.jsx)(B,{setAudioStorageId:S,setAudio:h,voiceType:P,audio:x,voicePrompt:E,setVoicePrompt:Z,setAudioDuration:T}),(0,s.jsx)(L,{setImage:m,setImageStorageId:c,image:u,imagePrompt:t,setImagePrompt:a}),(0,s.jsx)("div",{className:"mt-10 w-full",children:(0,s.jsx)(i.z,{type:"submit",className:"text-16 w-full bg-orange-1 py-4 font-extrabold text-white-1 transition-all duration-500 hover:bg-black-1",children:U?(0,s.jsxs)(s.Fragment,{children:["Submitting",(0,s.jsx)(F.Z,{size:20,className:"animate-spin ml-2"})]}):"Submit & Publish Podcast"})})]})]})})]})}},495:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var s=a(7437),r=a(2265),n=a(1538),l=a(2218),i=a(7440);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",plain:"border-none bg-transparent text-[16px] font-bold leading-normal text-white-1"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:r,size:l,className:a})),ref:t,...d})});c.displayName="Button"},3102:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(7437),r=a(2265),n=a(7440);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},5657:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9253:function(e,t,a){"use strict";a.d(t,{h:function(){return s}});let s=a(2539).qL},7440:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(4839),r=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[173,523,766,183,498,681,971,23,744],function(){return e(e.s=7733)}),_N_E=e.O()}]);